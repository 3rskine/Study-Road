#include <bits/stdc++.h>
using namespace std;

bool cmp(int a, int b, int M) {
    int modA = a % M;
    int modB = b % M;
    
    if (modA != modB) return modA < modB;

    bool oddA = a % 2 != 0;
    bool oddB = b % 2 != 0;

    if (oddA != oddB) return oddA; // 奇數在前

    if (oddA && oddB) return a > b; // 都是奇數，數字大排前
    if (!oddA && !oddB) return a < b; // 都是偶數，數字小排前

    return false; // 一般情況
}



int main() {
    int N, M;
    while (cin >> N >> M) {
        cout << N << " " << M << "\n";
        if (N == 0 && M == 0) break;

        vector<int> nums(N);
        for (int i = 0; i < N; i++) cin >> nums[i];

        sort(nums.begin(), nums.end(), [&](int a, int b){
            return cmp(a, b, M);
        });

        for (int x : nums) cout << x << "\n";
    }
    return 0;
}
